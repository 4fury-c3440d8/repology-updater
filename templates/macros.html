{%- macro repository_link(reponame) -%}
	{%- if repometadata[reponame].url -%}
		<a href="{{ repometadata[reponame].url }}">{{ repometadata[reponame].desc }}</a>
	{%- else -%}
		{{ repometadata[reponame].desc }}
	{%- endif -%}
{%- endmacro -%}

{%- macro maintainer_link(maintainer) -%}
	{% if maintainer|maintainer_to_link -%}
		<a href="{{ maintainer|maintainer_to_link }}">{{ maintainer }}</a>
	{%- else -%}
		{{ maintainer }}
	{%- endif -%}
{%- endmacro -%}

{%- macro package_link(package, text) -%}
	{%- if repometadata[package.repo].links -%}
		<a href="{{ repometadata[package.repo].links[0].url|pkg_format(package) }}">{{ text }}</a>
	{%- else -%}
		{{ text }}
	{%- endif -%}
{%- endmacro -%}

{%- macro safe_percent(value, total, round=1) -%}
	{%- if total == 0 -%}
		-
	{%- else -%}
	{%- if round > 0 -%}
		{{ (value/total*100.0)|round(round) }}%
	{%- else -%}
		{{ (value/total*100.0)|int }}%
	{%- endif -%}
	{%- endif -%}
{%- endmacro -%}

{%- macro value_with_delta(value, old_value) -%}
	{%- if old_value is defined -%}
		{%- if value > old_value -%}
		<div class="popup-container">
			{{- value -}}
			<span class="popup-container-inner"><sup class="popup delta-positive">+{{ value - old_value }} in last 24h</sup></span></div>
		{%- elif value < old_value -%}
		<div class="popup-container">
			{{- value -}}
			<span class="popup-container-inner"><sup class="popup delta-negative">-{{ old_value - value }} in last 24h</sup></span></div>
		{%- else -%}
		{{- value -}}
		{%- endif -%}
	{%- else -%}
	{{- value -}}
	{%- endif -%}
{%- endmacro -%}
